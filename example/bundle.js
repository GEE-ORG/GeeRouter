!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(this,t),this._hash="",this.from={path:"",fullPath:location.href},this.to={path:"",fullPath:location.href},this.historyMod="pushState"in window.history&&a,this.history=[],this.historyAnchor=-1,this.beforeEachFuncs=[],this.afterEachFuncs=[],this.origin=location.protocol+"//"+location.host+location.pathname,this.routes=i,this.defaultPath="/",this.page404=function(){},this.path2Ele={},this.curActive=null,this.isControlling=!1,this.redirectDelay=null,this.routes.forEach(function(t){t.default&&(e.defaultPath=t.path),"*"===t.path&&(e.page404=t.handler)})}return r(t,[{key:"start",value:function(){var t=this;this.historyMod?window.addEventListener("popstate",function(e){var i=e.state&&e.state.path;i&&(t.pathName=i)}):window.addEventListener("hashchange",function(){t.pathName=location.hash.replace("#!","")}),this._firstPage()}},{key:"parse",value:function(t){var e=this;if("string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof NodeList||t instanceof HTMLCollection||t instanceof Node)return Array.from(t,function(t){if("A"===t.tagName){var i=t.getAttribute("href"),n=i.split("?")[0];e.historyMod?t.addEventListener("click",function(t){t.preventDefault(),e._pushState({path:i},i,i)}):t.setAttribute("href","#!"+i),e.path2Ele[n]?(e.path2Ele[n]=[e.path2Ele[n]],e.path2Ele[n].push(t)):e.path2Ele[n]=t}}),this}},{key:"_firstPage",value:function(){this.historyMod||(""!==location.hash?this.pathName=location.hash.replace("#!",""):location.hash="!"+this.defaultPath)}},{key:"_pushState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";window.history.pushState(t,e,i),this.pathName=i}},{key:"_pathChange",value:function(t){var e=this;if(this.routes.length){var i=t.from,n=t.to,r=this.beforeEachFuncs.length-1,o=this.routes.length-1,h={from:i,to:n,params:{},query:{}},s=n.fullPath;s.indexOf("?")>=0&&s.split("?")[1].split("&").forEach(function(t){var e=t.split("="),i=e[0],n=e[1];try{h.query[i]=window.decodeURIComponent(n)}catch(t){h.query[i]=n}});for(var c=0;c<=o;c++){var u=function(t){var a=e.routes[t],o=!1;if(e.pathName===a.path)o=!0;else if(/:\w+/.test(a.path)){var s=a.path.match(/:(\w+)/g),c=a.path.replace(/(:\w+)/g,"([^/?]+)"),u=new RegExp(c).exec(e.pathName);if(u&&u.length){o=!0;for(var l=0;l<s.length;l++){var f=s[l].replace(":","");try{h.params[f]=window.decodeURIComponent(u[l+1])}catch(t){h.params[f]=u[l+1]}}}}if(!o)return"continue";if(e.beforeEachFuncs.length){var p=0,d=function t(){p<r?e.beforeEachFuncs[++p](i,n,t):a.handler(h)};e.beforeEachFuncs[0](i,n,d)}else a.handler(h);if(e.afterEachFuncs.length)for(var y=0;y<e.afterEachFuncs.length;y++)e.afterEachFuncs[y](i,n);return e.redirectDelay&&clearTimeout(e.redirectDelay),a.redirect&&(e.redirectDelay=setTimeout(function(){e._updatePath(a.redirect),e.redirectDelay=null},200)),{v:void 0}}(c);switch(u){case"continue":continue;default:if("object"===(void 0===u?"undefined":a(u)))return u.v}}if(this.beforeEachFuncs.length){var l=0,f=function t(){l<r?e.beforeEachFuncs[++l](i,n,t,"404"):e.page404(h)};this.beforeEachFuncs[0](i,n,f,"404")}else this.page404(h)}}},{key:"_updatePath",value:function(t){this.historyMod?this._pushState({path:t},t,t):window.location.hash="!"+t}},{key:"beforeEach",value:function(t){return this.beforeEachFuncs.push(t),this}},{key:"afterEach",value:function(t){return this.afterEachFuncs.push(t),this}},{key:"back",value:function(){this.go(-1)}},{key:"forward",value:function(){this.go(1)}},{key:"go",value:function(t){if(this.isControlling=!0,!((t=~~t)<0&&0===this.historyAnchor||t>0&&this.historyAnchor===this.history.length-1)){var e=this.historyAnchor+t;t>0&&(e=e>this.history.length-1?this.history.length-1:e),t<0&&(e=e<0?0:e),this.historyAnchor=e;var i=this.history[e];this._updatePath(i)}}},{key:"push",value:function(t){this._updatePath(t)}},{key:"pathName",get:function(){return this._hash},set:function(t){this.from.path=this.pathName.split("?")[0],this.from.fullPath=this.origin+"#!"+this.pathName,this._hash=t,this.to.path=this.pathName.split("?")[0],this.to.fullPath=this.origin+"#!"+this.pathName,this.isControlling?this.isControlling=!1:(this.history.push(this.pathName),this.historyAnchor=this.history.length-1),this._pathChange({from:this.from,to:this.to}),this.curActive&&(Array.isArray(this.path2Ele[this.curActive])?this.path2Ele[this.curActive].forEach(function(t){t.classList.remove("active")}):this.path2Ele[this.curActive].classList.remove("active")),Array.isArray(this.path2Ele[this.to.path])?this.path2Ele[this.to.path].forEach(function(t){t.classList.add("active")}):this.path2Ele[this.to.path].classList.add("active"),this.curActive=this.to.path}}]),t}();e.default=o},function(t,e,i){"use strict";var n=i(0),a=function(t){return t&&t.__esModule?t:{default:t}}(n),r="true"===localStorage.getItem("history")||!1,o=document.querySelector(".container"),h={home:function(){o.innerText="Home"},post:function(){o.innerText="Post"},notFound:function(){o.innerText="404"},article:function(t){o.innerHTML='<pre style="font-size: 14px">'+JSON.stringify(t,null,"\t")+"</pre>"}},s=new a.default([{path:"/",handler:h.home},{path:"/post",handler:h.post,default:!0},{path:"/article/:id/:title",handler:h.article},{path:"/gallery/:id",handler:h.article},{path:"/redirect",handler:function(){},redirect:"/"},{path:"*",handler:h.notFound}],r);s.parse(document.querySelectorAll("a")),s.start(),document.querySelector(".back").addEventListener("click",function(t){s.back()}),document.querySelector(".forward").addEventListener("click",function(t){s.forward()}),window.geerouter=s}]);